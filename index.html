<!DOCTYPE html>
<html>

<head>
    <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
    <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
    <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
    <!--[if gt IE 8]><!-->
    <html class="no-js">
    <!--<![endif]-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>机务段后台</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="lib/layui/css/layui.css">
    <script src="./lib/jQuery.js"></script>
</head>

<body class="layui-layout-body">
    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <div class="layui-layout layui-layout-admin">
        <!-- 内容 -->
        <div class="layui-header">
            <div class="layui-logo">机务段</div>
            <!-- 头部区域（可配合layui已有的水平导航） -->
            <ul class="layui-nav layui-layout-left" lay-filter="nav">
                <li class="layui-nav-item layui-this">
                    <a href="javascript:;" data-index='0'>系统首页</a>
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:;" data-index='1'>培训管理</a>
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:;" data-index='2'>基本信息</a>
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:;" data-index='3'>考务管理</a>
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:;" data-index='4'>其它系统</a>
                </li>
            </ul>
            <ul class="layui-nav layui-layout-right">
                <li class="layui-nav-item">
                    <a href="javascript:;">
                        <img src="http://t.cn/RCzsdCq" class="layui-nav-img"> 段长
                    </a>
                    <dl class="layui-nav-child">
                        <dd>
                            <a href="">基本资料</a>
                        </dd>
                        <dd>
                            <a href="">安全设置</a>
                        </dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="">退出</a>
                </li>
            </ul>
        </div>

        <div class="layui-side layui-bg-black">
            <div class="layui-side-scroll">
                <!-- 左侧导航区域（可配合layui已有的垂直导航） -->

                <ul class="layui-nav layui-nav-tree sideNav" lay-filter="test">
                    <li class='layui-nav-item'>
                        <a href='' target=''>公告首页</a>
                    </li>
                    <li class='layui-nav-item'>
                        <a href='' target=''>发布公告</a>
                    </li>
                    <li class='layui-nav-item'>
                        <a href='' target=''>公告查询</a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="layui-body">
            <!-- 内容主体区域 -->
            <div style="padding: 15px;">
                <div id="iframe_box">
                    <div class="loading"></div>
                    <div class="show-iframe">
                        <iframe src="pages/annoumcement/index_announce.html" name="myIframe"></iframe>
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-footer">
            <!-- 底部固定区域 -->
            © layui.com - 底部固定区域
        </div>
    </div>
    <script src="lib/layui/layui.js"></script>
    <script>
        //JavaScript代码区域
        var dataArray = [
            [{
                'item': '公告首页',
                'href': 'pages/annoumcement/index_announce.html'
            }, {
                'item': '发布公告',
                'href': 'pages/annoumcement/push_announce.html'
            }, {
                'item': '公告查询',
                'href': 'pages/annoumcement/query_announce.html'
            }],
            [{
                'item': '发布培训任务',
                'href': 'pages/train/push_train.html'
            }, {
                'item': '培训任务查询',
                'href': 'pages/train/query_train.html'
            }, {
                'item': '学习资料库',
                'href': 'pages/train/library.html'
            }, {
                'item': '发布考试任务',
                'href': 'pages/train/push_exam.html'
            }, {
                'item': '考试影像分析',
                'href': 'pages/train/analysis_video.html'
            }, {
                'item': '调查问卷管理',
                'href': 'pages/train/questionnaire.html'
            }]
        ]

        layui.use('element', function () {
            var element = layui.element;
            element.on('nav(nav)', function (data) {
                console.log(data[0].dataset.index);
                $(".sideNav").empty();
                for (var i = 0; i < dataArray[data[0].dataset.index].length; i++) {
                    var template = "<li class='layui-nav-item'><a target='myIframe' href='" +
                        dataArray[data[0].dataset.index][i].href + "'>" +
                        dataArray[data[0].dataset.index][i].item + "</a></li>";
                    $(".sideNav").append(template);
                }
            })
        });
    </script>
</body>

</html>